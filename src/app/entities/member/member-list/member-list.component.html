<div class="mat-elevation-z4" *ngIf="dataSource.data.length; else loading">
    <table mat-table #table [dataSource]="dataSource" @tableRowAnimation matSort>
        <ng-container matColumnDef="player">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Giocatore </th>
            <td mat-cell *matCellDef="let row">
                <a [routerLink]="['/players',row.player.id]">{{row.player.name}} {{row.player.surname}}</a>
            </td>
        </ng-container>

        <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef> Ruolo </th>
            <td mat-cell *matCellDef="let row">{{row.role.abbreviation}}</td>
        </ng-container>

        <ng-container matColumnDef="club">
            <th mat-header-cell *matHeaderCellDef> Club </th>
            <td mat-cell *matCellDef="let row">
                <a [routerLink]="['/clubs',row.club.id]">{{row.club.name}}</a>
            </td>
        </ng-container>

        <ng-container matColumnDef="sum_present">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Presenze </th>
            <td mat-cell *matCellDef="let row">{{row.stats.sum_present}} ({{row.stats.sum_valued}})</td>
        </ng-container>

        <ng-container matColumnDef="avg_points">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> MP </th>
            <td mat-cell *matCellDef="let row">{{row.stats.avg_points}}</td>
        </ng-container>

        <ng-container matColumnDef="avg_rating">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> MV </th>
            <td mat-cell *matCellDef="let row">{{row.stats.avg_rating}}</td>
        </ng-container>

        <ng-container matColumnDef="sum_goals">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Gol </th>
            <td mat-cell *matCellDef="let row">{{row.stats.sum_goals}}</td>
        </ng-container>

        <ng-container matColumnDef="sum_goals_against">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Gol subiti </th>
            <td mat-cell *matCellDef="let row">{{row.stats.sum_goals_against}}</td>
        </ng-container>

        <ng-container matColumnDef="sum_assist">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Assist </th>
            <td mat-cell *matCellDef="let row">{{row.stats.sum_assist}}</td>
        </ng-container>

        <ng-container matColumnDef="sum_yellow_card">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Amm </th>
            <td mat-cell *matCellDef="let row">{{row.stats.sum_yellow_card}}</td>
        </ng-container>

        <ng-container matColumnDef="sum_red_card">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Esp </th>
            <td mat-cell *matCellDef="let row">{{row.stats.sum_red_card}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>
<ng-template #loading>
    <mat-progress-spinner color="accent" mode="indeterminate"></mat-progress-spinner>
</ng-template>