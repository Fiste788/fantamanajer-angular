<div *ngIf="player | async as player; else loading">
    <div @enterDetailAnimation>
        <div class="animation-container">
            <fm-parallax-header [title]="player.name + ' ' + player.surname" [subtitle]="selectedMember.role.singolar + ' - ' + selectedMember.club.name"
                [backgroundImage]="selectedMember.club.background_url" [image]="selectedMember.photo_url || player.photo_url">
                <div parallax-header-right>
                    <a *ngIf="selectedMember.free" (click)="buy()" [routerLink]="'/teams/' + app.team.id + '/transferts'" [queryParams]="{new_member_id: selectedMember.id}"
                        mat-button>Acquista</a>
                    <mat-form-field [ngClass]="media.isActive('gt-sm') ? 'white' : ''">
                        <mat-select (selectionChange)='seasonChange()' style="width:146px" placeholder="Stagione" [(ngModel)]="selectedMember">
                            <mat-option *ngFor="let member of player.members" [value]="member">{{ member.season.name }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </fm-parallax-header>
        </div>
    </div>
    <div class="mat-elevation-z4" *ngIf="dataSource">
        <table mat-table #table [dataSource]="dataSource" @tableRowAnimation matSort>
            <ng-container matColumnDef="matchday">
                <th mat-header-cell *matHeaderCellDef>
                    <span mdTooltip="Giornata">#</span>
                </th>
                <td mat-cell *matCellDef="let row">{{row.matchday.number}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="rating">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Voto </th>
                <td mat-cell *matCellDef="let row">{{row.rating}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="points">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Punti </th>
                <td mat-cell *matCellDef="let row">{{row.points}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="goals">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Gol </th>
                <td mat-cell *matCellDef="let row">{{row.goals}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="goals_against">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Gol s </th>
                <td mat-cell *matCellDef="let row">{{row.goals_against}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="assist">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Assist </th>
                <td mat-cell *matCellDef="let row">{{row.assist}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="penalities_scored">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Rig </th>
                <td mat-cell *matCellDef="let row">{{row.penalities_scored}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="penalities_taken">
                <th mat-header-cell *matHeaderCellDef> Rig s </th>
                <td mat-cell *matCellDef="let row">{{row.penalities_taken}}
                    <td>
            </ng-container>

            <ng-container matColumnDef="regular">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span mdTooltip="Titolare">Tit.</span>
                </th>
                <td mat-cell *matCellDef="let row">
                    <i *ngIf="row.regular" class="material-icons">done</i>
                    <td>
            </ng-container>

            <ng-container matColumnDef="yellow_card">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span mdTooltip="Ammonizioni" class="yellow_card mat-elevation-z1"></span>
                </th>
                <td mat-cell *matCellDef="let row">
                    <i *ngIf="row.yellow_card" class="material-icons">done</i>
                    <td>
            </ng-container>

            <ng-container matColumnDef="red_card">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span mdTooltip="Espulsioni" class="red_card mat-elevation-z1"></span>
                </th>
                <td mat-cell *matCellDef="let row">
                    <i *ngIf="row.red_card" class="material-icons">done</i>
                    <td>
            </ng-container>

            <ng-container matColumnDef="quotation">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span mdTooltip="Quotazione">Q.</span>
                </th>
                <td mat-cell *matCellDef="let row">{{row.quotation}}
                    <td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>
<ng-template #loading>
    <mat-progress-spinner color="accent" mode="indeterminate"></mat-progress-spinner>
</ng-template>