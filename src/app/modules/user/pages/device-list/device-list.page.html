<div *ngIf="dataSource; else loading">
  <div
    *ngIf="dataSource.data.length; else empty"
    class="table-container mat-elevation-z1"
  >
    <table
      @tableRowAnimation
      #table
      mat-table
      matSort
      [dataSource]="dataSource"
    >
      <ng-container matColumnDef="name">
        <th
          *matHeaderCellDef
          mat-header-cell
          mat-sort-header
        > Nome </th>
        <td
          *matCellDef="let row;"
          mat-cell
        >
          {{row.name}}
        </td>
      </ng-container>

      <ng-container matColumnDef="created_at">
        <th
          *matHeaderCellDef
          mat-header-cell
          mat-sort-header
        > Creato il </th>
        <td
          *matCellDef="let row;"
          mat-cell
        >
          {{row.created_at}}
        </td>
      </ng-container>

      <ng-container matColumnDef="counter">
        <th
          *matHeaderCellDef
          mat-header-cell
        > Utilizzi </th>
        <td
          *matCellDef="let row;"
          mat-cell
        >
          {{row.counter}}
        </td>
      </ng-container>

      <tr
        *matHeaderRowDef="displayedColumns; sticky: true"
        mat-header-row
      ></tr>
      <tr
        *matRowDef="let row; columns: displayedColumns;"
        mat-row
      ></tr>
    </table>
  </div>
</div>
<ng-template #empty>
  <app-mat-empty-state
    label="Nessun device registrato"
    icon="swap_vert"
    [rounded]="true"
    [size]="330"
  >
  </app-mat-empty-state>
</ng-template>
<ng-template #loading>
  <mat-progress-spinner
    color="accent"
    mode="indeterminate"
  ></mat-progress-spinner>
</ng-template>
